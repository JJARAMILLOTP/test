<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Prueba de API con Token</title>
  </head>
  <body>
    <h1>Prueba de CORS con API .NET y JWT</h1>
    <button onclick="obtenerDatos()">Obtener par√°metros</button>
    <pre id="resultado"></pre>

    <script>
      async function obtenerDatos() {
        const token =
          'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IkVzVXJlIiwiZW1haWwiOiJ1cmVAbWFpbC5lc3AuY29tIiwiZ3VpZCI6IjFmZTMyZjVhLTk3MGEtNDg0Yy1iYjA3LWRmMTZiZjVjZWYxZiIsImFjdGl2byI6IjEiLCJpZFVzdWFyaW8iOiIxMDUwIiwibnVtZXJvUHJvdmVlZG9yIjoiVVJFMTQiLCJyZmNQcm92ZWVkb3IiOiJVUkUxODA0MjlUTTYiLCJ0aXBvRG9jdW1lbnRvcyI6IjMiLCJ0aXBvVXN1YXJpbyI6IjIiLCJQcm92ZWVkb3IiOiIzc1VzdTRyMTBQcjB2MzNkMHIiLCJTZWNjaW9uT3JkZW5Db21wcmFSRmFjaWwtNyI6IlNlY2Npb25PcmRlbkNvbXByYVJGYWNpbC05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJTZWNjaW9uRmFjdHVyYS03IjoiU2VjY2lvbkZhY3R1cmEtOWNlNTgyNTEtZThlNi00ZGY1LTg3ZDMtZGY5OWQxMGM2MTQ0IiwiU2VjY2lvbkNhcmdhRG9jdW1lbnRvcyI6IlNlY2Npb25DYXJnYURvY3VtZW50b3MiLCJTZWNjaW9uUGFnb3MtNyI6IlNlY2Npb25QYWdvcy05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJDb25zdWx0YXJPcmRlbkNvbXByYS03IjoiU2VjY2lvbk9yZGVuQ29tcHJhLTItOWNlNTgyNTEtZThlNi00ZGY1LTg3ZDMtZGY5OWQxMGM2MTQ0IiwiQ2FyZ2FyRmFjdHVyYS03IjoiU2VjY2lvbkZhY3R1cmEtMi05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJDYXJnYXJEb2N1bWVudG8tNyI6IlNlY2Npb25DYXJnYURvY3VtZW50b3MtMi05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJTZWNjaW9uQ2FyZ2FEb2N1bWVudG9zLTciOiJTZWNjaW9uQ2FyZ2FEb2N1bWVudG9zLTljZTU4MjUxLWU4ZTYtNGRmNS04N2QzLWRmOTlkMTBjNjE0NCIsIlNlY2Npb25SZXBvcnRlcy03IjoiU2VjY2lvblJlcG9ydGVzLTljZTU4MjUxLWU4ZTYtNGRmNS04N2QzLWRmOTlkMTBjNjE0NCIsIkNyZWFyVGlwb3NEb2N1bWVudG9zLTciOiJTZWNjaW9uVGlwb3NEb2N1bWVudG9zLTItOWNlNTgyNTEtZThlNi00ZGY1LTg3ZDMtZGY5OWQxMGM2MTQ0IiwiRWxpbWluYXJUaXBvc0RvY3VtZW50b3MtNyI6IlNlY2Npb25UaXBvc0RvY3VtZW50b3MtNC05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJDYXJnYXJQYWdvLTciOiJTZWNjaW9uQ2FyZ2FQYWdvLTItOWNlNTgyNTEtZThlNi00ZGY1LTg3ZDMtZGY5OWQxMGM2MTQ0IiwiQ29uc3VsdGFyT3JkZW5Db21wcmEtMTA2IjoiU2VjY2lvbk9yZGVuQ29tcHJhLTItOWNlNTgyNTEtZThlNi00ZGY1LTg3ZDMtZGY5OWQxMGM2MTQ0IiwiU2VjY2lvbk9yZGVuQ29tcHJhUkZhY2lsLTEwNiI6IlNlY2Npb25PcmRlbkNvbXByYVJGYWNpbC05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJTZWNjaW9uRmFjdHVyYS0xMDYiOiJTZWNjaW9uRmFjdHVyYS05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJDYXJnYXJGYWN0dXJhLTEwNiI6IlNlY2Npb25GYWN0dXJhLTItOWNlNTgyNTEtZThlNi00ZGY1LTg3ZDMtZGY5OWQxMGM2MTQ0IiwiQ2FyZ2FyRG9jdW1lbnRvLTEwNiI6IlNlY2Npb25DYXJnYURvY3VtZW50b3MtMi05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJTZWNjaW9uQ2FyZ2FEb2N1bWVudG9zLTEwNiI6IlNlY2Npb25DYXJnYURvY3VtZW50b3MtOWNlNTgyNTEtZThlNi00ZGY1LTg3ZDMtZGY5OWQxMGM2MTQ0IiwiQ2FyZ2FyUGFnby0xMDYiOiJTZWNjaW9uQ2FyZ2FQYWdvLTItOWNlNTgyNTEtZThlNi00ZGY1LTg3ZDMtZGY5OWQxMGM2MTQ0IiwiU2VjY2lvblBhZ29zLTEwNiI6IlNlY2Npb25QYWdvcy05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJTZWNjaW9uUmVwb3J0ZXMtMTA2IjoiU2VjY2lvblJlcG9ydGVzLTljZTU4MjUxLWU4ZTYtNGRmNS04N2QzLWRmOTlkMTBjNjE0NCIsIlNlY2Npb25UaXBvc0RvY3VtZW50b3MtMTA2IjoiU2VjY2lvblRpcG9zRG9jdW1lbnRvcy05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJDZW50cm9Db3N0b3MtMTA2IjoiU2VjY2lvbkZhY3R1cmEtMy05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJTZWNjaW9uRW50b3Jub09jIjoiRXNTZWNjaW9uVW5pY2EiLCJSZXZpc2lvbkRvY3VtZW50by0xMDYiOiJTZWNjaW9uQ2FyZ2FEb2N1bWVudG9zLTMtOWNlNTgyNTEtZThlNi00ZGY1LTg3ZDMtZGY5OWQxMGM2MTQ0IiwiQXV0b3JpemFyRG9jdW1lbnRvLTEwNiI6IlNlY2Npb25BdXRvcml6YURvY3VtZW50b3MtNC05Y2U1ODI1MS1lOGU2LTRkZjUtODdkMy1kZjk5ZDEwYzYxNDQiLCJzb2NpZWRhZC0xMDYiOiI2MjAiLCJleHAiOjE3NDY1MDYxOTN9.QEZv9EltOebkwNSL_9iiZP5xlhhRefq4WYAk_fzVMvY';

        try {
          const respuesta = await fetch(
            'https://localhost:44316/api/Configuracion/106/ObtenerParametro',
            {
              method: 'GET',
              headers: {
                'Content-Type': 'application/json',
                Authorization: `Bearer ${token}`,
              },
            }
          );

          if (!respuesta.ok) {
            throw new Error('Error HTTP: ' + respuesta.status);
          }

          const datos = await respuesta.json();
          document.getElementById('resultado').textContent = JSON.stringify(
            datos,
            null,
            2
          );
        } catch (error) {
          document.getElementById('resultado').textContent =
            'Error: ' + error.message;
        }
      }
    </script>
  </body>
</html>
